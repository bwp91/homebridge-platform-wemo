{
  "pluginAlias": "BelkinWeMo",
  "pluginType": "platform",
  "customUi": true,
  "customUiPath": "./lib/homebridge-ui",
  "headerDisplay": "<p align=\"center\"><img width=\"60%\" src=\"https://user-images.githubusercontent.com/43026681/101325568-e03ddb00-3863-11eb-8b66-54c6a322840a.png\"></p><p align=\"center\">For help and support please visit our <a href=\"https://github.com/bwp91/homebridge-platform-wemo/wiki\">GitHub Wiki</a>. We hope you find this plugin useful!</p>",
  "singular": true,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "type": "string",
        "default": "Wemo"
      },
      "mode": {
        "type": "string",
        "title": "Device Detection",
        "description": "This setting defines how the plugin finds your devices.",
        "default": "auto",
        "oneOf": [{
            "title": "Auto (Discovery + Manual Devices)",
            "enum": [
              "auto"
            ]
          },
          {
            "title": "Manual (Only Manual Devices)",
            "enum": [
              "manual"
            ]
          }
        ]
      },
      "discoveryInterval": {
        "type": "number",
        "title": "Refresh Interval",
        "description": "An interval (in seconds) in which the plugin will initally find and continually check device connections. Must be 15 or more.",
        "placeholder": 30,
        "minimum": 15
      },
      "disableDeviceLogging": {
        "type": "boolean",
        "title": "Disable Device Logging",
        "description": "If checked, device updates will not be added to the log."
      },
      "debug": {
        "title": "Debug Logging",
        "type": "boolean",
        "description": "If checked, more information will be added to the log."
      },
      "debugFakegato": {
        "type": "string"
      },
      "disablePlugin": {
        "type": "boolean",
        "title": "Disable Plugin",
        "description": "If checked, the plugin will remove all accessories and not load the plugin on restart."
      },
      "makerTypes": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "serialNumber": {
              "type": "string",
              "title": "Maker Serial Number"
            },
            "makerType": {
              "type": "string",
              "title": "Show As",
              "oneOf": [{
                  "title": "A Garage Door",
                  "enum": [
                    "garageDoor"
                  ]
                },
                {
                  "title": "A Switch (with contact sensor if exists)",
                  "enum": [
                    "switch"
                  ]
                }
              ]
            },
            "makerTimer": {
              "type": "number",
              "title": "Open/Close Time",
              "description": "The time in seconds for how long it takes the garage door to open/close. Must be 1 or more.",
              "placeholder": 20,
              "minimum": 1
            }
          }
        }
      },
      "wemoInsights": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "serialNumber": {
              "type": "string",
              "title": "Insight Serial Number"
            },
            "showTodayTC": {
              "type": "boolean",
              "title": "Show Today's Consumption",
              "description": "If checked, today's consumption will show in the Eve app's Total Consumption field instead of the cumulative value."
            },
            "wattDiff": {
              "type": "number",
              "title": "Wattage Logging",
              "description": "The plugin will not log device wattage if the difference from the previous value is less than this number. Must be 1 or more.",
              "placeholder": 1,
              "minimum": 1
            }
          }
        }
      },
      "wemoMotions": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "serialNumber": {
              "type": "string",
              "title": "Motion Serial Number"
            },
            "noMotionTimer": {
              "type": "number",
              "title": "No Motion Timer",
              "description": "A timer (in seconds) for how long after motion is not detected that the state is changed.",
              "placeholder": 60,
              "minimum": 0
            }
          }
        }
      },
      "wemoOutlets": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "serialNumber": {
              "type": "string",
              "title": "Outlet Serial Number"
            },
            "showAsSwitch": {
              "type": "boolean",
              "title": "Show As Switch"
            }
          }
        }
      },
      "manualDevices": {
        "type": "array",
        "items": {
          "type": "string",
          "title": "Device URL",
          "placeholder": "http://192.168.1.20:49153/setup.xml",
          "description": "Port is usually 49153 but can sometimes be 49152 or 49154. Enter just an IP to let the plugin try and obtain the port automatically (experimental!)."
        }
      },
      "ignoredDevices": {
        "title": "Ignored Devices",
        "type": "array",
        "items": {
          "type": "string",
          "title": "Serial Number",
          "description": "The serial number of the device that should be ignored. If you wish to ignore a bulb connected through a Wemo Link, please use the device ID of the bulb."
        }
      },
      "removeByName": {
        "type": "string"
      },
      "wemoClient": {
        "type": "object",
        "properties": {
          "listen_interface": {
            "type": "string",
            "title": "Listener Interface",
            "description": "This can be used to specify which network interface to listen on. If blank then by default the server will listen on all interfaces, however, Wemo subscription messages will only be sent to the first non-internal IPv4 address returned by os.networkInterfaces() after being sorted by compatible network which may or may not be what you want."
          },
          "port": {
            "type": "integer",
            "title": "Listener Port",
            "description": "This can be used to specify a port to bind to for listening to UPnP events. If blank or 0 then the plugin will listen on any available randomly selected port.",
            "placeholder": 0
          },
          "discover_opts": {
            "type": "object",
            "properties": {
              "interfaces": {
                "type": "string",
                "title": "SSDP Interfaces",
                "description": "A comma separated list of interfaces to explicitly bind to. If blank then bind to all available interfaces."
              },
              "explicitSocketBind": {
                "type": "boolean",
                "title": "SSDP Explicit Socket Bind",
                "description": "Bind sockets to each discovered interface explicitly instead of relying on the system. Might help with issues with multiple NICs."
              }
            }
          }
        }
      }
    }
  },
  "layout": [{
      "type": "fieldset",
      "title": "Optional Settings",
      "expandable": true,
      "items": [
        "mode",
        "discoveryInterval",
        "disableDeviceLogging",
        "debug",
        "disablePlugin"
      ]
    },
    {
      "key": "makerTypes",
      "expandable": true,
      "title": "Wemo Makers",
      "add": "Add Another Device",
      "type": "array",
      "items": [{
        "type": "fieldset",
        "items": [
          "makerTypes[].serialNumber",
          "makerTypes[].makerType",
          "makerTypes[].makerTimer"
        ]
      }]
    },
    {
      "key": "wemoInsights",
      "expandable": true,
      "title": "Wemo Insights",
      "add": "Add Another Device",
      "type": "array",
      "items": [{
        "type": "fieldset",
        "items": [
          "wemoInsights[].serialNumber",
          "wemoInsights[].showTodayTC",
          "wemoInsights[].wattDiff"
        ]
      }]
    },
    {
      "key": "wemoMotions",
      "expandable": true,
      "title": "Wemo Motions",
      "add": "Add Another Device",
      "type": "array",
      "items": [{
        "type": "fieldset",
        "items": [
          "wemoMotions[].serialNumber",
          "wemoMotions[].noMotionTimer"
        ]
      }]
    },
    {
      "key": "wemoOutlets",
      "expandable": true,
      "title": "Wemo Outlets",
      "add": "Add Another Device",
      "type": "array",
      "items": [{
        "type": "fieldset",
        "items": [
          "wemoOutlets[].serialNumber",
          "wemoOutlets[].showAsSwitch"
        ]
      }]
    },
    {
      "key": "manualDevices",
      "expandable": true,
      "title": "Manual Devices",
      "add": "Add Another Device",
      "type": "array",
      "items": [{
        "type": "fieldset",
        "items": [
          "manualDevices[]"
        ]
      }]
    },
    {
      "key": "ignoredDevices",
      "expandable": true,
      "title": "Ignored Devices",
      "add": "Add Another Device",
      "type": "array",
      "items": [{
        "type": "fieldset",
        "items": [
          "ignoredDevices[]"
        ]
      }]
    },
    {
      "type": "fieldset",
      "title": "Network Settings",
      "expandable": true,
      "items": [
        "wemoClient.listen_interface",
        "wemoClient.port",
        "wemoClient.discover_opts.interfaces",
        "wemoClient.discover_opts.explicitSocketBind"
      ]
    }
  ]
}